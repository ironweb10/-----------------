"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const Endpoints_1 = (0, tslib_1.__importDefault)(require("../../resources/Endpoints"));
const PartyInvitationExpiredError_1 = (0, tslib_1.__importDefault)(require("../exceptions/PartyInvitationExpiredError"));
const BasePartyInvitation_1 = (0, tslib_1.__importDefault)(require("./BasePartyInvitation"));
/**
 * Represents a recieved party invitation
 */
class ReceivedPartyInvitation extends BasePartyInvitation_1.default {
    /**
     * Accepts this invitation
     * @throws {PartyInvitationExpiredError} The invitation already got accepted or declined
     * @throws {EpicgamesAPIError}
     */
    async accept() {
        var _a;
        if (this.isExpired || this.isHandled)
            throw new PartyInvitationExpiredError_1.default();
        await this.party.join();
        this.isHandled = true;
        await this.client.http.sendEpicgamesRequest(true, 'DELETE', `${Endpoints_1.default.BR_PARTY}/user/${(_a = this.client.user) === null || _a === void 0 ? void 0 : _a.id}/pings/${this.sender.id}`, 'fortnite');
    }
    /**
     * Declines this invitation
     * @throws {PartyInvitationExpiredError} The invitation already got accepted or declined
     */
    async decline() {
        var _a;
        if (this.isExpired || this.isHandled)
            throw new PartyInvitationExpiredError_1.default();
        await this.client.http.sendEpicgamesRequest(true, 'DELETE', `${Endpoints_1.default.BR_PARTY}/user/${(_a = this.client.user) === null || _a === void 0 ? void 0 : _a.id}/pings/${this.sender.id}`, 'fortnite');
        this.isHandled = true;
    }
}
exports.default = ReceivedPartyInvitation;
//# sourceMappingURL=ReceivedPartyInvitation.js.map